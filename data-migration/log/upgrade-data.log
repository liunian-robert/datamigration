Starting DataMigrationApplication on SKY-20160329PDG with PID 60032 (F:\myluban1.4\Data-Migration\target\classes started by Administrator in F:\myluban1.4\Data-Migration)
The following profiles are active: dev
Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@7ef9db3c: startup date [Thu Oct 25 11:22:28 CST 2018]; root of context hierarchy
Flyway 4.2.0 by Boxfuse
Database: jdbc:mysql://localhost:3306/test?useUnicode=true&characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&autoReconnect=true&useAffectedRows=true (MySQL 5.7)
Successfully validated 4 migrations (execution time 00:00.033s)
Current version of schema `test`: 1.1.2
outOfOrder mode is active. Migration of schema `test` may not be reproducible.
Schema `test` is up to date. No migration necessary.
Registering beans for JMX exposure on startup
Started DataMigrationApplication in 1.577 seconds (JVM running for 3.983)
Closing org.springframework.context.annotation.AnnotationConfigApplicationContext@7ef9db3c: startup date [Thu Oct 25 11:22:28 CST 2018]; root of context hierarchy
Unregistering JMX-exposed beans on shutdown
Starting DataMigrationApplication on SKY-20160329PDG with PID 54888 (F:\myluban1.4\data-migration\target\classes started by Administrator in F:\myluban1.4\data-migration)
The following profiles are active: dev
Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@138a6240: startup date [Thu Oct 25 13:07:20 CST 2018]; root of context hierarchy
Flyway 4.2.0 by Boxfuse
Database: jdbc:mysql://localhost:3306/test?useUnicode=true&characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&autoReconnect=true&useAffectedRows=true (MySQL 5.7)
Successfully validated 4 migrations (execution time 00:00.030s)
Current version of schema `test`: 1.1.2
outOfOrder mode is active. Migration of schema `test` may not be reproducible.
Schema `test` is up to date. No migration necessary.
Registering beans for JMX exposure on startup
Started DataMigrationApplication in 1.626 seconds (JVM running for 4.664)
Closing org.springframework.context.annotation.AnnotationConfigApplicationContext@138a6240: startup date [Thu Oct 25 13:07:20 CST 2018]; root of context hierarchy
Unregistering JMX-exposed beans on shutdown
Starting DataMigrationApplication on SKY-20160329PDG with PID 63732 (F:\github\data-migration\data-migration\target\classes started by Administrator in F:\github\data-migration\data-migration)
The following profiles are active: dev
Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@2fa7ef50: startup date [Fri Oct 26 13:26:28 CST 2018]; root of context hierarchy
Cluster created with settings {hosts=[192.168.3.150:10320], mode=SINGLE, requiredClusterType=UNKNOWN, serverSelectionTimeout='30000 ms', maxWaitQueueSize=500}
Cluster created with settings {hosts=[192.168.3.150:10320], mode=SINGLE, requiredClusterType=UNKNOWN, serverSelectionTimeout='30000 ms', maxWaitQueueSize=500}
Opened connection [connectionId{localValue:1, serverValue:2526}] to 192.168.3.150:10320
Monitor thread successfully connected to server with description ServerDescription{address=192.168.3.150:10320, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, version=ServerVersion{versionList=[3, 2, 0]}, minWireVersion=0, maxWireVersion=4, maxDocumentSize=16777216, roundTripTimeNanos=1051049, setName='inner150', canonicalAddress=192.168.3.150:10320, hosts=[192.168.3.150:10321, 192.168.3.150:10320, 192.168.3.150:10322], passives=[], arbiters=[], primary='192.168.3.150:10320', tagSet=TagSet{[]}, electionId=5ba3abd60000000000000004, setVersion=1, lastWriteDate=null, lastUpdateTimeNanos=1571154019748226}
Opened connection [connectionId{localValue:2, serverValue:2527}] to 192.168.3.150:10320
Monitor thread successfully connected to server with description ServerDescription{address=192.168.3.150:10320, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, version=ServerVersion{versionList=[3, 2, 0]}, minWireVersion=0, maxWireVersion=4, maxDocumentSize=16777216, roundTripTimeNanos=1228358, setName='inner150', canonicalAddress=192.168.3.150:10320, hosts=[192.168.3.150:10321, 192.168.3.150:10320, 192.168.3.150:10322], passives=[], arbiters=[], primary='192.168.3.150:10320', tagSet=TagSet{[]}, electionId=5ba3abd60000000000000004, setVersion=1, lastWriteDate=null, lastUpdateTimeNanos=1571154024024712}
Cluster created with settings {hosts=[localhost:27017], mode=SINGLE, requiredClusterType=UNKNOWN, serverSelectionTimeout='30000 ms', maxWaitQueueSize=500}
Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'gridFsTemplate' defined in class path resource [org/springframework/boot/autoconfigure/data/mongo/MongoDataAutoConfiguration.class]: Unsatisfied dependency expressed through method 'gridFsTemplate' parameter 1; nested exception is org.springframework.beans.factory.NoUniqueBeanDefinitionException: No qualifying bean of type 'org.springframework.data.mongodb.core.MongoTemplate' available: more than one 'primary' bean found among candidates: [primaryMongoTemplate, secondaryMongoTemplate]
Unregistering JMX-exposed beans on shutdown


Error starting ApplicationContext. To display the auto-configuration report re-run your application with 'debug' enabled.
Application startup failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'gridFsTemplate' defined in class path resource [org/springframework/boot/autoconfigure/data/mongo/MongoDataAutoConfiguration.class]: Unsatisfied dependency expressed through method 'gridFsTemplate' parameter 1; nested exception is org.springframework.beans.factory.NoUniqueBeanDefinitionException: No qualifying bean of type 'org.springframework.data.mongodb.core.MongoTemplate' available: more than one 'primary' bean found among candidates: [primaryMongoTemplate, secondaryMongoTemplate]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:749)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:467)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1173)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1067)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:513)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:761)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:866)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:542)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:737)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:370)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:314)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1162)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1151)
	at com.robert.migration.datamigration.DataMigrationApplication.main(DataMigrationApplication.java:13)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.springframework.boot.maven.AbstractRunMojo$LaunchRunner.run(AbstractRunMojo.java:527)
	at java.lang.Thread.run(Thread.java:745)
Caused by: org.springframework.beans.factory.NoUniqueBeanDefinitionException: No qualifying bean of type 'org.springframework.data.mongodb.core.MongoTemplate' available: more than one 'primary' bean found among candidates: [primaryMongoTemplate, secondaryMongoTemplate]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.determinePrimaryCandidate(DefaultListableBeanFactory.java:1365)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.determineAutowireCandidate(DefaultListableBeanFactory.java:1326)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1113)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1066)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:835)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:741)
	... 24 common frames omitted
Starting DataMigrationApplication on SKY-20160329PDG with PID 65832 (F:\github\data-migration\data-migration\target\classes started by Administrator in F:\github\data-migration\data-migration)
The following profiles are active: dev
Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@4fb4cfab: startup date [Fri Oct 26 13:26:58 CST 2018]; root of context hierarchy
Cluster created with settings {hosts=[192.168.3.150:10320], mode=SINGLE, requiredClusterType=UNKNOWN, serverSelectionTimeout='30000 ms', maxWaitQueueSize=500}
Cluster created with settings {hosts=[192.168.3.150:10320], mode=SINGLE, requiredClusterType=UNKNOWN, serverSelectionTimeout='30000 ms', maxWaitQueueSize=500}
Opened connection [connectionId{localValue:1, serverValue:2528}] to 192.168.3.150:10320
Monitor thread successfully connected to server with description ServerDescription{address=192.168.3.150:10320, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, version=ServerVersion{versionList=[3, 2, 0]}, minWireVersion=0, maxWireVersion=4, maxDocumentSize=16777216, roundTripTimeNanos=1254543, setName='inner150', canonicalAddress=192.168.3.150:10320, hosts=[192.168.3.150:10321, 192.168.3.150:10320, 192.168.3.150:10322], passives=[], arbiters=[], primary='192.168.3.150:10320', tagSet=TagSet{[]}, electionId=5ba3abd60000000000000004, setVersion=1, lastWriteDate=null, lastUpdateTimeNanos=1571183946224875}
Opened connection [connectionId{localValue:2, serverValue:2529}] to 192.168.3.150:10320
Monitor thread successfully connected to server with description ServerDescription{address=192.168.3.150:10320, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, version=ServerVersion{versionList=[3, 2, 0]}, minWireVersion=0, maxWireVersion=4, maxDocumentSize=16777216, roundTripTimeNanos=1376069, setName='inner150', canonicalAddress=192.168.3.150:10320, hosts=[192.168.3.150:10321, 192.168.3.150:10320, 192.168.3.150:10322], passives=[], arbiters=[], primary='192.168.3.150:10320', tagSet=TagSet{[]}, electionId=5ba3abd60000000000000004, setVersion=1, lastWriteDate=null, lastUpdateTimeNanos=1571183953995182}
Cluster created with settings {hosts=[localhost:27017], mode=SINGLE, requiredClusterType=UNKNOWN, serverSelectionTimeout='30000 ms', maxWaitQueueSize=500}
Flyway 4.2.0 by Boxfuse
Database: jdbc:mysql://localhost:3306/test?useUnicode=true&characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&autoReconnect=true&useAffectedRows=true (MySQL 5.7)
Successfully validated 4 migrations (execution time 00:00.031s)
Current version of schema `test`: 1.1.2
outOfOrder mode is active. Migration of schema `test` may not be reproducible.
Schema `test` is up to date. No migration necessary.
Registering beans for JMX exposure on startup
Started DataMigrationApplication in 2.045 seconds (JVM running for 4.95)
Closing org.springframework.context.annotation.AnnotationConfigApplicationContext@4fb4cfab: startup date [Fri Oct 26 13:26:58 CST 2018]; root of context hierarchy
Unregistering JMX-exposed beans on shutdown
